<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ULB Elections Dashboard</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<style>
body {font-family:Arial;margin:40px;background:#f5f5f5}
.container {max-width:1500px;margin:auto;background:white;padding:30px}
table {min-width:1200px;border-collapse:collapse;margin-top:20px;font-size:13px}
@media (max-width: 768px) {table {font-size: 11px;}}
.table-wrapper {width: 100%;overflow-x: auto;}
th,td {padding:6px;border:1px solid #ddd;text-align:center}
th {background:#2c3e50;color:white}
.section {display:none;margin-top:30px}
.section.active {display:block}
.filter-section {margin-bottom:30px;text-align:center;padding:15px;background:#ecf0f1}
/* Sticky header */
thead th {
  position: sticky;
  top: 0;
  z-index: 2;
}
/* Sticky total row */
.total-row td {
  position: sticky;
  top: 35px;
  background: #fff8dc;
  font-weight: bold;
  z-index: 1;
}
/* Sticky first column (S.No.) */
table th:first-child,
table td:first-child {
  position: sticky;
  left: 0;
  background: white;
  z-index: 3;
}
.table-wrapper {
  width: 100%;
  overflow-x: auto;
  position: relative;
}

/* Highlight selected party column */
.highlight-col {
  background-color: #DCDEFA !important;
}
</style>
</head>
<body>

<div class="container">
<h2 style="text-align:center">Telangana ULB Elections Dashboard</h2>

<div class="filter-section">
District:
<select id="districtSelect">
<option value="">ALL Districts</option>
</select>
<button onclick="filterByDistrict()">Filter</button>
</div>

<div id="districtResults" class="section"></div>

<div class="filter-section">
Comparison based on:
<select id="compareParty">
<option value="">Select Party</option>
<option value="BJP">BJP</option>
<option value="CPM">CPM</option>
<option value="INC">INC</option>
<option value="AIMIM">AIMIM</option>
<option value="BRS">BRS</option>
<option value="BSP">BSP</option>
<option value="Other Registered Parties with TSEC">Others</option>
<option value="Independents">Independents</option>
</select>
<button onclick="comparePartyWise()">Compare</button>
</div>

<div id="compareResults" class="section"></div>

<script>
const csvData = `S.No,Name of the District,Name of the Municipality/Corporation,No. of Wards,BJP,CPM,INC,AIMIM,BRS,TDP,YSRCP,AAP,BSP,Other Registered Parties with TSEC,Independents,Total Results declared\n2,Adilabad,Adilabad,49,21,0,11,6,6,0,0,0,0,0,5,49\n3,Komaram Bheem Asifabad,Asifabad,20,0,0,7,0,9,0,0,0,0,0,4,20\n4,Komaram Bheem Asifabad,Kaghaznagar,30,5,0,9,1,11,0,0,0,0,0,4,30\n5,Mancherial,Bellampally,34,1,0,14,0,14,0,0,0,0,0,5,34\n6,Mancherial,Chennur,18,2,0,11,0,4,0,0,0,0,0,1,18\n7,Mancherial,Kyathanpally,22,0,0,7,0,10,0,0,0,0,4,1,22\n8,Mancherial,Laxettipet,15,1,0,11,0,3,0,0,0,0,0,0,15\n9,Mancherial,Mancherial MC,60,5,0,44,0,8,0,0,0,0,3,0,60\n10,Nirmal,BHAINSA,26,6,0,1,12,0,0,0,0,0,0,7,26\n11,Nirmal,Khanapur,12,4,0,3,0,4,0,0,0,0,0,1,12\n12,Nirmal,Nirmal,42,13,0,24,3,2,0,0,0,0,0,0,42\n13,Nizamabad,Armoor,36,8,0,19,1,5,0,0,0,0,0,3,36\n14,Nizamabad,Bheemgal,12,0,0,8,0,4,0,0,0,0,0,0,12\n15,Nizamabad,Bodhan,38,3,0,17,12,5,0,0,0,0,0,1,38\n16,Nizamabad,Nizamabad MC,60,28,0,17,14,1,0,0,0,0,0,0,60\n17,Jagtial,Dharmapuri,15,0,0,15,0,0,0,0,0,0,0,0,15\n18,Jagtial,Jagtiyal,50,6,0,23,2,4,0,0,0,0,0,15,50\n19,Jagtial,Korutla,33,6,0,18,0,8,0,0,0,0,0,1,33\n20,Jagtial,Metpalli,26,10,0,6,0,6,0,0,0,0,0,4,26\n21,Jagtial,Raikal,12,5,0,3,0,3,0,0,0,0,0,1,12\n22,Peddapalli,Manthani,13,0,0,11,0,1,0,0,0,0,1,0,13\n23,Peddapalli,Peddapalli,36,1,0,27,0,1,0,0,0,0,5,2,36\n24,Peddapalli,Ramagundam MC,60,1,0,38,0,13,0,0,0,0,7,1,60\n25,Peddapalli,Sulthanabad,15,1,0,12,0,1,0,0,0,0,1,0,15\n26,Jayashankar Bhupalpally,Bhupalapally,30,2,0,16,0,10,0,0,0,0,1,1,30\n27,BHADRADRI KOTHGUDEM,Aswaraopeta,22,1,0,17,0,2,0,0,0,0,0,2,22\n28,BHADRADRI KOTHGUDEM,Kothagudem MC,60,1,1,22,0,8,0,0,0,0,22,6,60\n29,BHADRADRI KOTHGUDEM,Yellandu,24,0,0,19,0,3,0,0,0,0,0,2,24\n30,Mahabubabad,Dornakal,15,0,0,11,0,4,0,0,0,0,0,0,15\n31,Mahabubabad,Kesamudram,16,0,0,8,0,8,0,0,0,0,0,0,16\n32,Mahabubabad,Mahabubabad,36,1,3,13,0,11,0,0,0,0,3,5,36\n33,Mahabubabad,Maripeda,15,0,0,9,0,5,0,0,0,0,0,1,15\n34,Mahabubabad,Thorrur,16,0,0,7,0,9,0,0,0,0,0,0,16\n35,Warangal,Narsampet,30,1,1,21,0,6,0,0,0,0,0,1,30\n36,Warangal,Wardhannapet,12,0,0,5,0,6,0,0,0,0,0,1,12\n37,Hanumakonda,Parakal,22,3,0,13,0,6,0,0,0,0,0,0,22\n38,Karimnagar,Choppandandi,14,3,0,10,0,1,0,0,0,0,0,0,14\n39,Karimnagar,Huzurabad,30,5,0,16,0,8,0,0,0,0,0,1,30\n40,Karimnagar,Jammikunta,30,4,0,10,0,12,0,0,0,0,1,3,30\n41,Karimnagar,Karimnagar MC,66,30,0,14,3,9,0,0,0,0,2,8,66\n42,Rajanna Sircilla,Sircilla,39,5,0,6,0,27,0,0,0,0,0,1,39\n43,Rajanna Sircilla,Vemulawada,28,8,0,13,0,5,0,0,0,0,0,2,28\n44,Kamareddy,Banswada,19,3,0,11,1,3,0,0,0,0,0,1,19\n45,Kamareddy,Bichkunda,12,0,0,10,0,2,0,0,0,0,0,0,12\n46,Kamareddy,Kamareddy,49,16,0,19,0,11,0,0,0,0,0,3,49\n47,Kamareddy,Yellareddy,12,0,0,10,0,1,0,0,0,0,0,1,12\n48,Sangareddy,Andole-Jogipet,20,0,0,16,0,3,0,0,0,0,0,1,20\n49,Sangareddy,Gaddapotharam,18,0,0,3,0,14,0,0,0,0,0,1,18\n50,Sangareddy,Gummadidala,22,2,0,4,0,15,0,0,0,0,0,1,22\n51,Sangareddy,Indresham,18,2,0,6,0,9,0,0,0,0,0,1,18\n52,Sangareddy,Isnapur,26,0,0,10,0,12,0,0,0,0,0,4,26\n53,Sangareddy,Jinnaram,20,4,0,6,0,8,0,0,0,0,0,2,20\n54,Sangareddy,Kohir,16,1,0,8,1,5,0,0,0,0,0,1,16\n55,Sangareddy,Narayankhed,15,1,0,11,0,3,0,0,0,0,0,0,15\n56,Sangareddy,Sadasivapet,26,1,0,16,0,8,0,0,0,0,0,1,26\n57,Sangareddy,Sangareddy,38,2,0,22,1,10,0,0,0,0,0,3,38\n58,Sangareddy,Zaheerabad,37,3,0,14,2,15,0,0,0,0,0,3,37\n59,Medak,Medak,32,2,0,14,0,15,0,0,0,1,0,0,32\n60,Medak,Narsapur,15,4,0,6,0,5,0,0,0,0,0,0,15\n61,Medak,Ramyampet,12,1,0,8,0,3,0,0,0,0,0,0,12\n62,Medak,Thoopran,16,3,0,4,0,9,0,0,0,0,0,0,16\n63,Siddipet,Cherial,12,0,0,5,0,7,0,0,0,0,0,0,12\n64,Siddipet,Dubbaka,20,2,0,4,0,11,0,0,0,0,1,2,20\n65,Siddipet,Gajwel,20,1,0,7,0,11,0,0,0,0,0,1,20\n66,Siddipet,Husnabad,20,0,0,16,0,4,0,0,0,0,0,0,20\n67,Jangaon,Jangaon,30,0,1,12,0,13,0,0,0,0,0,4,30\n68,Jangaon,Station Ghanpur,18,0,0,13,0,5,0,0,0,0,0,0,18\n69,Yadadri Bhongiri,Alair,12,2,0,7,0,3,0,0,0,0,0,0,12\n70,Yadadri Bhongiri,Bhongir,35,4,0,22,0,4,0,0,0,0,0,5,35\n71,Yadadri Bhongiri,Choutuppal,20,3,1,13,0,3,0,0,0,0,0,0,20\n72,Yadadri Bhongiri,Mothkur,12,0,0,8,0,3,0,0,0,0,0,1,12\n73,Yadadri Bhongiri,Pochampally,13,1,0,6,0,5,0,0,0,0,0,1,13\n74,Yadadri Bhongiri,Yadagirigutta,12,2,0,8,0,1,0,0,0,0,1,0,12\n75,Medchal-Malkajgiri,Aliyabad,20,3,0,8,0,7,0,0,0,1,0,1,20\n76,Medchal-Malkajgiri,Muduchinthlapally,24,1,0,9,0,14,0,0,0,0,0,0,24\n77,Medchal-Malkajgiri,Yellampet,24,4,0,8,0,12,0,0,0,0,0,0,24\n78,Rangareddy,Amangal,15,6,0,1,0,8,0,0,0,0,0,0,15\n79,Rangareddy,Chevella,18,3,0,11,0,4,0,0,0,0,0,0,18\n80,Rangareddy,Ibrahimpatnam,24,2,0,8,0,13,0,0,0,0,0,1,24\n81,Rangareddy,Moinabad,26,4,0,10,0,7,0,0,0,0,0,5,26\n82,Rangareddy,Shadnagar,28,1,0,15,0,11,0,0,0,0,0,1,28\n83,Rangareddy,Shankarpally,15,0,0,9,0,4,0,0,0,0,0,2,15\n84,Vikarabad,Kodangal,12,0,0,10,1,1,0,0,0,0,0,0,12\n85,Vikarabad,Parigi,18,0,0,8,0,8,0,0,0,0,0,2,18\n86,Vikarabad,Tandur,36,3,0,19,1,12,0,0,0,0,0,1,36\n87,Vikarabad,Vikarabad,34,4,0,17,1,11,0,0,0,0,0,1,34\n88,Mahabubnagar,Bhoothpur,10,2,0,7,0,1,0,0,0,0,0,0,10\n89,Mahabubnagar,Devarkadara,12,1,0,6,0,4,0,0,0,0,0,1,12\n90,Mahabubnagar,Mahabubnagar MC,60,8,0,29,3,15,0,0,0,0,0,5,60\n91,Jogulamba Gadwal,Alampur,10,0,0,5,0,5,0,0,0,0,0,0,10\n92,Jogulamba Gadwal,Gadwal,37,7,0,16,1,11,0,0,0,0,0,2,37\n93,Jogulamba Gadwal,Ieeja,20,0,0,7,0,13,0,0,0,0,0,0,20\n94,Jogulamba Gadwal,Waddepalle,10,0,0,1,0,1,0,0,0,0,8,0,10\n95,Wanaparthy,Amarchinta,10,3,1,3,0,3,0,0,0,0,0,0,10\n96,Wanaparthy,Atmakur,10,3,0,6,0,1,0,0,0,0,0,0,10\n97,Wanaparthy,Kothakota,15,1,0,10,0,3,0,0,0,0,0,1,15\n98,Wanaparthy,Pebbair,12,0,0,7,0,5,0,0,0,0,0,0,12\n99,Wanaparthy,Wanaparthy,33,2,1,20,0,8,0,0,0,0,0,2,33\n100,Nagarkurnool,Kalwakurthy,22,5,0,13,0,3,0,0,0,0,0,1,22\n101,Nagarkurnool,Kollapur,19,0,0,16,0,3,0,0,0,0,0,0,19\n102,Nagarkurnool,Nagarkurnool,24,0,0,18,0,6,0,0,0,0,0,0,24\n103,Nalgonda,Chandur,10,0,0,6,0,3,0,0,0,0,1,0,10\n104,Nalgonda,Chityal,12,0,0,9,0,2,0,0,0,0,0,1,12\n105,Nalgonda,Devarakonda,20,1,0,11,0,6,0,0,0,0,0,2,20\n106,Nalgonda,Haliya,12,0,0,11,0,1,0,0,0,0,0,0,12\n107,Nalgonda,Miryalguda,48,1,0,31,0,14,0,0,0,0,1,1,48\n108,Nalgonda,Nalgonda MC,48,4,0,27,2,9,0,0,0,0,4,2,48\n109,Nalgonda,Nandikonda,12,0,0,11,0,1,0,0,0,0,0,0,12\n110,Suryapet,Huzurnagar,28,0,1,19,0,4,0,0,0,0,1,3,28\n111,Suryapet,Kodada,35,0,0,26,0,3,0,0,0,0,0,6,35\n112,Suryapet,Neredcherla,15,0,0,9,0,5,0,0,0,0,1,0,15\n113,Suryapet,Suryapet,48,1,0,31,0,11,0,0,0,0,0,5,48\n114,Suryapet,Tirumalagiri,15,0,0,5,0,10,0,0,0,0,0,0,15\n115,Khammam,Edulapuram,32,0,2,24,0,2,0,0,0,0,3,1,32\n116,Khammam,Kalluru Municipality,20,0,0,12,0,7,0,0,0,0,0,1,20\n117,Khammam,Madhira,22,0,0,18,0,1,0,0,0,0,0,3,22\n118,Khammam,Sathupalli,23,0,0,17,0,6,0,0,0,0,0,0,23\n119,Khammam,Wyra,20,0,1,12,0,5,0,0,0,0,1,1,20\n120,Mulugu,Mulugu,20,1,0,12,0,5,0,0,0,0,0,2,20\n121,Narayanpet,Kosgi,16,0,0,16,0,0,0,0,0,0,0,0,16\n122,Narayanpet,Maddur,16,0,0,9,0,6,0,0,0,0,0,1,16\n123,Narayanpet,Makthal,16,3,0,12,0,0,0,0,0,0,0,0,15\n124,Narayanpet,Narayanpet,24,11,0,7,2,2,0,0,0,0,1,1,24\n`;
const districtSummary = [{"Name of the District": "Adilabad", "No. of Wards": 49, "BJP": 21, "CPM": 0, "INC": 11, "AIMIM": 6, "BRS": 6, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 5, "Total Results declared": 49}, {"Name of the District": "BHADRADRI KOTHGUDEM", "No. of Wards": 106, "BJP": 2, "CPM": 1, "INC": 58, "AIMIM": 0, "BRS": 13, "BSP": 0, "Other Registered Parties with TSEC": 22, "Independents": 10, "Total Results declared": 106}, {"Name of the District": "Hanumakonda", "No. of Wards": 22, "BJP": 3, "CPM": 0, "INC": 13, "AIMIM": 0, "BRS": 6, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 0, "Total Results declared": 22}, {"Name of the District": "Jagtial", "No. of Wards": 136, "BJP": 27, "CPM": 0, "INC": 65, "AIMIM": 2, "BRS": 21, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 21, "Total Results declared": 136}, {"Name of the District": "Jangaon", "No. of Wards": 48, "BJP": 0, "CPM": 1, "INC": 25, "AIMIM": 0, "BRS": 18, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 4, "Total Results declared": 48}, {"Name of the District": "Jayashankar Bhupalpally", "No. of Wards": 30, "BJP": 2, "CPM": 0, "INC": 16, "AIMIM": 0, "BRS": 10, "BSP": 0, "Other Registered Parties with TSEC": 1, "Independents": 1, "Total Results declared": 30}, {"Name of the District": "Jogulamba Gadwal", "No. of Wards": 77, "BJP": 7, "CPM": 0, "INC": 29, "AIMIM": 1, "BRS": 30, "BSP": 0, "Other Registered Parties with TSEC": 8, "Independents": 2, "Total Results declared": 77}, {"Name of the District": "Kamareddy", "No. of Wards": 92, "BJP": 19, "CPM": 0, "INC": 50, "AIMIM": 1, "BRS": 17, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 5, "Total Results declared": 92}, {"Name of the District": "Karimnagar", "No. of Wards": 140, "BJP": 42, "CPM": 0, "INC": 50, "AIMIM": 3, "BRS": 30, "BSP": 0, "Other Registered Parties with TSEC": 3, "Independents": 12, "Total Results declared": 140}, {"Name of the District": "Khammam", "No. of Wards": 117, "BJP": 0, "CPM": 3, "INC": 83, "AIMIM": 0, "BRS": 21, "BSP": 0, "Other Registered Parties with TSEC": 4, "Independents": 6, "Total Results declared": 117}, {"Name of the District": "Komaram Bheem Asifabad", "No. of Wards": 50, "BJP": 5, "CPM": 0, "INC": 16, "AIMIM": 1, "BRS": 20, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 8, "Total Results declared": 50}, {"Name of the District": "Mahabubabad", "No. of Wards": 98, "BJP": 1, "CPM": 3, "INC": 48, "AIMIM": 0, "BRS": 37, "BSP": 0, "Other Registered Parties with TSEC": 3, "Independents": 6, "Total Results declared": 98}, {"Name of the District": "Mahabubnagar", "No. of Wards": 82, "BJP": 11, "CPM": 0, "INC": 42, "AIMIM": 3, "BRS": 20, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 6, "Total Results declared": 82}, {"Name of the District": "Mancherial", "No. of Wards": 149, "BJP": 9, "CPM": 0, "INC": 87, "AIMIM": 0, "BRS": 39, "BSP": 0, "Other Registered Parties with TSEC": 7, "Independents": 7, "Total Results declared": 149}, {"Name of the District": "Medak", "No. of Wards": 75, "BJP": 10, "CPM": 0, "INC": 32, "AIMIM": 0, "BRS": 32, "BSP": 1, "Other Registered Parties with TSEC": 0, "Independents": 0, "Total Results declared": 75}, {"Name of the District": "Medchal-Malkajgiri", "No. of Wards": 68, "BJP": 8, "CPM": 0, "INC": 25, "AIMIM": 0, "BRS": 33, "BSP": 1, "Other Registered Parties with TSEC": 0, "Independents": 1, "Total Results declared": 68}, {"Name of the District": "Mulugu", "No. of Wards": 20, "BJP": 1, "CPM": 0, "INC": 12, "AIMIM": 0, "BRS": 5, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 2, "Total Results declared": 20}, {"Name of the District": "Nagarkurnool", "No. of Wards": 65, "BJP": 5, "CPM": 0, "INC": 47, "AIMIM": 0, "BRS": 12, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 1, "Total Results declared": 65}, {"Name of the District": "Nalgonda", "No. of Wards": 162, "BJP": 6, "CPM": 0, "INC": 106, "AIMIM": 2, "BRS": 36, "BSP": 0, "Other Registered Parties with TSEC": 6, "Independents": 6, "Total Results declared": 162}, {"Name of the District": "Narayanpet", "No. of Wards": 72, "BJP": 14, "CPM": 0, "INC": 44, "AIMIM": 2, "BRS": 8, "BSP": 0, "Other Registered Parties with TSEC": 1, "Independents": 2, "Total Results declared": 71}, {"Name of the District": "Nirmal", "No. of Wards": 80, "BJP": 23, "CPM": 0, "INC": 28, "AIMIM": 15, "BRS": 6, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 8, "Total Results declared": 80}, {"Name of the District": "Nizamabad", "No. of Wards": 146, "BJP": 39, "CPM": 0, "INC": 61, "AIMIM": 27, "BRS": 15, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 4, "Total Results declared": 146}, {"Name of the District": "Peddapalli", "No. of Wards": 124, "BJP": 3, "CPM": 0, "INC": 88, "AIMIM": 0, "BRS": 16, "BSP": 0, "Other Registered Parties with TSEC": 14, "Independents": 3, "Total Results declared": 124}, {"Name of the District": "Rajanna Sircilla", "No. of Wards": 67, "BJP": 13, "CPM": 0, "INC": 19, "AIMIM": 0, "BRS": 32, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 3, "Total Results declared": 67}, {"Name of the District": "Rangareddy", "No. of Wards": 126, "BJP": 16, "CPM": 0, "INC": 54, "AIMIM": 0, "BRS": 47, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 9, "Total Results declared": 126}, {"Name of the District": "Sangareddy", "No. of Wards": 256, "BJP": 16, "CPM": 0, "INC": 116, "AIMIM": 4, "BRS": 102, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 18, "Total Results declared": 256}, {"Name of the District": "Siddipet", "No. of Wards": 72, "BJP": 3, "CPM": 0, "INC": 32, "AIMIM": 0, "BRS": 33, "BSP": 0, "Other Registered Parties with TSEC": 1, "Independents": 3, "Total Results declared": 72}, {"Name of the District": "Suryapet", "No. of Wards": 141, "BJP": 1, "CPM": 1, "INC": 90, "AIMIM": 0, "BRS": 33, "BSP": 0, "Other Registered Parties with TSEC": 2, "Independents": 14, "Total Results declared": 141}, {"Name of the District": "Vikarabad", "No. of Wards": 100, "BJP": 7, "CPM": 0, "INC": 54, "AIMIM": 3, "BRS": 32, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 4, "Total Results declared": 100}, {"Name of the District": "Wanaparthy", "No. of Wards": 80, "BJP": 9, "CPM": 2, "INC": 46, "AIMIM": 0, "BRS": 20, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 3, "Total Results declared": 80}, {"Name of the District": "Warangal", "No. of Wards": 42, "BJP": 1, "CPM": 1, "INC": 26, "AIMIM": 0, "BRS": 12, "BSP": 0, "Other Registered Parties with TSEC": 0, "Independents": 2, "Total Results declared": 42}, {"Name of the District": "Yadadri Bhongiri", "No. of Wards": 104, "BJP": 12, "CPM": 1, "INC": 64, "AIMIM": 0, "BRS": 19, "BSP": 0, "Other Registered Parties with TSEC": 1, "Independents": 7, "Total Results declared": 104}];
const originalData = Papa.parse(csvData, {header:true,skipEmptyLines:true}).data;

window.onload=init;

function init() {
    const districts=[...new Set(originalData.map(r=>r['Name of the District']).filter(Boolean))].sort();
    const select=document.getElementById('districtSelect');
    districts.forEach(d=>{const opt=document.createElement('option');opt.value=d;opt.textContent=d;select.appendChild(opt);});
}

function filterByDistrict() {

    const district=document.getElementById('districtSelect').value;
    const div=document.getElementById('districtResults');
    let data,title;

    if(!district) {
        data = originalData;
        title = "All District Detailed View";
    } else {
        data = originalData.filter(r=>r['Name of the District']===district);
        title = district + " Detailed View";
    }

    let html='<div class="table-wrapper"><table><thead><tr>';
    html += '<th>S.No</th>';
    html += '<th>Name of the District</th>';
    html += '<th>Name of the Municipality/Corporation</th>';
    html += '<th>No. of Wards</th>';
    html += '<th>BJP</th><th>CPM</th><th>INC</th><th>AIMIM</th><th>BRS</th>';
    html += '<th>BSP</th>';
    html += '<th>Others</th>';
    html += '<th>Independents</th>';
    html += '<th>Total Results declared</th>';
    html += '</tr></thead><tbody>';

    data.forEach((row,index)=>{
        html+='<tr>';
        html+=`<td>${index+1}</td>`;
        html+=`<td>${row['Name of the District']||''}</td>`;
        html+=`<td>${row['Name of the Municipality/Corporation']||''}</td>`;
        html+=`<td>${row['No. of Wards']||0}</td>`;
        html+=`<td>${row['BJP']||0}</td>`;
        html+=`<td>${row['CPM']||0}</td>`;
        html+=`<td>${row['INC']||0}</td>`;
        html+=`<td>${row['AIMIM']||0}</td>`;
        html+=`<td>${row['BRS']||0}</td>`;
        html+=`<td>${row['BSP']||0}</td>`;
        html+=`<td>${row['Other Registered Parties with TSEC']||0}</td>`;
        html+=`<td>${row['Independents']||0}</td>`;
        html+=`<td>${row['Total Results declared']||0}</td>`;
        html+='</tr>';
    });

    html+='</tbody></table></div>';

    div.innerHTML="<h3>"+title+"</h3>"+html;
    div.classList.add('active');
    document.getElementById('compareResults').classList.remove('active');
}

function comparePartyWise() {

    const party=document.getElementById('compareParty').value;
    if(!party) return;

    const div=document.getElementById('compareResults');
    const filtered=originalData.filter(r=>parseInt(r[party])>0);
    // Calculate total seats won by selected party
const totalSeats = originalData.reduce((sum, row) => {
    return sum + (parseInt(row[party]) || 0);
}, 0);
// Calculate grand total of all parties seats
const grandTotal = originalData.reduce((sum, row) => {
    return sum + (
        parseInt(row['BJP']||0) +
        parseInt(row['CPM']||0) +
        parseInt(row['INC']||0) +
        parseInt(row['AIMIM']||0) +
        parseInt(row['BRS']||0) +
        parseInt(row['BSP']||0) +
        parseInt(row['Other Registered Parties with TSEC']||0) +
        parseInt(row['Independents']||0)
    );
}, 0);

const percentage = grandTotal > 0
    ? ((totalSeats / grandTotal) * 100).toFixed(2)
    : 0;
    
    const allParties=['BJP','CPM','INC','AIMIM','BRS','BSP','Other Registered Parties with TSEC','Independents'];
    const remaining=allParties.filter(p=>p!==party);

    let html='<div class="table-wrapper"><table><thead><tr>';
    html+='<th>S.No</th>';
    html+='<th>Name of the District</th>';
    html+='<th>Name of the Municipality/Corporation</th>';
    html+='<th>No. of Wards</th>';

    html+=`<th class="highlight-col">${party} (Seats)</th>`;

    remaining.forEach(p=>html+=`<th>${p}</th>`);

    html+='</tr></thead><tbody>';

// Total row (just after header)
html+=`
<tr class="total-row">
<td colspan="2" style="text-align:left; padding-left:10px;">
${party} : Total Seats Won
</td>
<td colspan="${remaining.length + 3}" style="text-align:left;">
${totalSeats} (${percentage}% Share)
</td>
</tr>
`;

    filtered.forEach((row,index)=>{
        html+='<tr>';
        html+=`<td>${index+1}</td>`;
        html+=`<td>${row['Name of the District']||''}</td>`;
        html+=`<td>${row['Name of the Municipality/Corporation']||''}</td>`;
        html+=`<td>${row['No. of Wards']||0}</td>`;
        html+=`<td class="highlight-col">${row[party]||0}</td>`;
        remaining.forEach(p=>html+=`<td>${row[p]||0}</td>`);
        html+='</tr>';
    });

    html+='</tbody></table></div>';

    div.innerHTML="<h3>"+party+" Winning ULBs - Comparison View</h3>"+html;
    div.classList.add('active');
    document.getElementById('districtResults').classList.remove('active');
}
</script>
</div>
</body>

</html>



